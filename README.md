<h1>Дипломный проект</h1>
<h2>Определение уязвимых групп населения</h2>
<ul>Задача:
    <li>кластеризовать регионы России и определить, какие из них наиболее остро нуждаются в помощи малообеспеченным/неблагополучным слоям населения;</li>
    <li>описать группы населения, сталкивающиеся с бедностью;</li>
    <li>определить:
        <ul>
            <li>влияет ли число детей, пенсионеров и других социально уязвимых групп на уровень бедности в регионе;</li>
            <li>связаны ли уровень бедности/социального неблагополучия с производством и потреблением в регионе;</li>
            <li>какие ещё зависимости можно наблюдать относительно социально незащищённых слоёв населения.</li>
        </ul>
    </li>
</ul>
<h3>Первый этап &mdash; знакомство с данными.</h3>
<p>На данном этапе нам предстоит рассмотреть все необходимые датасеты, привести наименования регионов во всех датасетах к единому виду, определить наличие пропусков, принять решение о способе заполнения/удаления пропусков.<p>
<p>Для того, чтобы выделить из всего набора данных только то, что касается самих регионов, без сводных данных по Российской Федерации и округам, создадим две функции. Первая будет отвечать за определение уровня региона (0 &mdash; Российская Федерация, 1 &mdash; федеральный округ, 3 &mdash; автономии в составе региона и 2 &mdash; сами регионы). Вторая функция будет приводить наименования регионов к единому виду.</p>
<p>В разных датасетах регионы могут иметь названия, отличающиеся по написанию. При этом различия могут быть даже не очень заметны взгляду, например, использование латинской буквы "a" вместо &laquo;а&raquo; русской. Для решения данной проблемы и предназначена вторая функция. &laquo;Правильным&raquo; будем считать наименование из таблицы population.xlsx</p>
<p>Раз мы выбрали таблицу population.xlsx &mdash; численность населения по регионам и федеральным округам на 1 января каждого года за 1999–2022 гг. &mdash; с неё и начнем наше знакомство с данными.</p>
<p>В данной таблице одна строка содержит наименование региона, а следующая за ней &mdash; необходимые данные. Создадим таблицу, в которой данные будут располагаться в одной строке с наименованием региона. Одновременно с этим переименуем стобцы, оставив в заголовке только год на единицу меньше, чем в текущем заголовке, т.е. вместо &laquo;январь 1999 г.&raquo; установим заголовок '1998'. Ещё одно преобразование будет заключать в себя внесение в новую таблицу только регионы без РФ и федеральных округов. Учтём при этом особенности Архангельской и Тюменской областей &mdash; оставим в новой таблице данные только по областям без входящих в них автономий и данные по самим автономиям.</p>
<p>Анализ показал, что в данной таблице отсутствуют только данные по несуществующим на сегодня округам, а также отсутствуют данные по Крыму и Севастополю до 2014 г. Строки, отвечающие за несуществующие округа удалим, а данные по Крыму и Севастополю оставим, но заполнять с этих строках данные до 2014 г. не будем, а учтём пи рассмотрении остальных датасетов, что мы ограничимся временным интервалом после 2014 года до 2020 года.</p>
<p>Для максимальной унификации процесса преобразования таблиц к единообразному виду, создадим функцию, отвечающую за весь набор стандартных преобразований наименований регионов. Кроме того, каждому региону сопоставим его ОКАТО, что позволит в том числе контролировать правильность приведения наименований регионов к нашему стандарту, просто включив проверку на наличие ОКАТО в каждой строке преобразованной таблицы. Для избегания потери данных при очередном &laquo;хитром&raquo; наименовании в очередной таблице, соединение таблиц будем проводить с помощью внешнего левого соединения, где первой будет стоять рассматриваемая таблица, а второй &mdash; справочник регионов.</p>
<p>Для получения данных о населении в разрезе возраста (младше трудоспособного, трудоспособного, старше трудоспособного) пришлось обратиться к сайту статистики, загрузив отдельно информацию по мужчинам (https://www.fedstat.ru/indicator/31548) и женщинам (https://www.fedstat.ru/indicator/33459) по следующим группам:<ul>
<li>регионы - все;</li>
<li>численность постоянного населения всего;</li>
<li>численность постоянного населения в трудоспособном возрасте;</li>
<li>численность постоянного населения старше трудоспособного возраста;</li>
<li>отдельно мужчины, отдельно женщины;</li>
<li>период с 2012 года по 2021 год.</li>
</ul>
Численность населения, моложе трудоспособного возраста придётся вычислять, т.к. не удалось получить данные по этой категории населения.
</p>
<p>Nаблицы child_mortality_urban_1990_2021.xls и child_mortality_rural_1990_2021.xls &mdash; число умерших на первом году жизни детей за год, по всем регионам, для города и сельской местности &mdash; соединяли в одну, т.к. далеко не все данные в таблицах удалось бы разделить по признаку местности.</p>
<p>Для таблицы disabled_total_by_age_2017_2022.csv &mdash; число людей с инвалидностью по регионам, по месяцам, по возрастным группам, были удалены данные по г.Байконур, т.к. в других таблицах данных по нему нет. Также мы не будем хранить данные в разрезе возрастных групп. Из периодов мы оставим данные только на 1 января, из года вычтем единицу, чтобы получились данные за предыдущий год. Кроме этого, пришлось транспонировать данные, а также заполнить пропуски, используя линейную интерполяцию по получившимя после транспотирования данных строках.</p>
<p>Для таблицы morbidity_2005_2020_age_disease.xls &mdash; заболеваемость на 100 тыс. человек населения, по возрастным группам и группам заболеваний &mdash; были приняты следующие упрощения:<ul>
<li>не брались в расчёт возрастные рамки;</li>
<li>количество заболеваний суммировалось (без использования сводных данных "Все болезни" &mdash; "Всего").</li>
</ul>
В результате таких действий мы кроме всего прочего приравнивали лёгкое заболевание к тяжёлоцй онкологии.</p>
<p>Следующая для рассмотрения таблица &mdash;  poverty_percent_by_regions_1992_2020.csv &mdash; процент людей, живущих за чертой бедности (с денежными доходами ниже величины прожиточного минимума), оценка за год по регионам. Единственная проблема при знакомстве с данными заключалась в том, что имена полей (года) имели тип "число", пришлось делать их принудительно "строкой".</p>
<p>Следующая таблица &mdash;  welfare_expense_share_2015_2020.xlsx &mdash; расходы на социальную политику от общих расходов бюджета региона, % в год &mdash; не преподнесла никаких сюрпризов.</p>
<p>Следующий датасет &mdash;  cash_real_income_wages_2015_2020.xlsx &mdash; среднедушевые и реальные денежные доходы населения, номинальная и реальная начисленная зарплата, по регионам &mdash; содержал четыре закладки. Для дальнейшей работы они были сведены в два различных датасета.</p>
<p>При рассмотрению группы таблиц  poverty_socdem_20*.xls &mdash; распределение малоимущего населения по социально-демографическим группам (дети, трудящиеся, пенсионеры) за 2017–2020 гг., по регионам. &mdash; опять пришлось обращать внимание на пропущенные данные. В случае, когда данные отсутствовали по всем группам населения за год, брались данные за предыдущий год, там, где не было данных только по одной группе, тогда проценты высчитывались исходя из общей суммы в 100%.</p>
<p>Некоторым особняком стоят данные о алкоголизме и наркомании. За каждый год приведены сведения о количестве случаев первично установленного диагноза. При обработке таблицы можно было пойти тремя путями:<ul>
<li>считать данные накопительным итогом, в этом случае мы получили бы более данные за несколько лет, то при этом появилась бы погрешность, образованная излечившимися, умершими, переехавшими в другие регионы, попавшими под постановку на учёт в "доисторические" времена; кроме того, данные по Крыму и Севастополю давали бы сильно заниженные результаты за счёт более позднего включения в статистику;</li>
<li>брать только данные за текущий год &mdash; подход не лишён недостатков, но позволяет оценить ситуацию здесь и сейчас, а не тянуть хвост десятилетий; в итого именно этот подход вошёл в работу;</li>
<li>дополнить данные из предыдущего варианта коэффициентом регрессии, который позволил бы оценить тенденции в появлении новых нарнкоманов и алкоголиков; к сожалению, от этого пришлось отказаться, т.к. данные заканчивались 2018 годом, а по Севастополю и Крыму получались фактически за 2 года.</li>
</ul>
<p>Следующая таблица workers.csv &mdash; отношение числа занятых в экономике региона к численности населения региона в трудоспособном возрасте, %, 2012–2020 гг. также оказалась с сюрпризом: Попытка получить данные из таблицы не увенчалась успехом, т.к. данных в предоставленной таблице просто нет. В результате данные были взяты из источника https://www.fedstat.ru/indicator/43702. При анализе таблицы в некоторых случаях получалось, что количество занятых в экономике людей превышало общее количество трудоспособных.</p>
<h3>Второй этап &mdash; подготовка данных.</h3>
<p>После первичного знакомстсва с данными, обработки пропущенных значений, будем объединять все данные в один датасет, включая в него данные за 2020 год и вычисленный для каждого региона и каждого показатекля коэффициент регрессии.<br />
На данном этапе примем следующие правила:<ul>
<li>все данные приведем либо к процентам, либо на душу населения;</li>
<li>будем рассматривать данные за 2020 год с одной оговоркой, и коэффициент регрессии, полученный по соответствующей строке данных при использовании всего периода (с 2015 года по 2020 год).</li>
</ul>
При формировании общего датасета будем дополнительно строить диаграммы для каждого признака и коэффициента регресии, давать небольшие комментарии к получившейся диаграмме. Для некоторых признаков построим дополнительно коробчатые диаграммы. Будем ещё учитывать направленность показателя. В случае, когда он должен оказать негативное влияние на положение региона, его будем включать в итоговый датасет со знаком минус.</p>
<h3>Третий этап &mdash; определение параметров модели.</h3>
<p>На этом этапе нам предстоит определить оптимальное число кластеров и наиболее подходящий метод для моделирования.</p>
<p>Перед каждам моделированием было проведено преобразование данных с использованием MinMaxScaler и приведением их к интервалу (-1; 1).</p>
<p>В идеале хотелось получить три кластера, отвечающих за богатые регионы, обычные регионы и регионы, нуждающиеся в поддержке.</p>
<p>В качестве моделей будем рассматривать K-MEANS, GaussianMixture, AgglomerativeClustering, SpectralClustering и ансамблевый метод, построенный с использованием всех предыдущих. Метод силуэта показал в качестве оптимального (silhouette_score = 0.413) вариант с четырьмя кластерами для SpectralClustering. Остальные рассмотреные методы давали разброс количества кластеров от двух до пяти. Ансамблевый метод в данном случае дал результат хуже, чем каждый в отдельности. Объяснить такую неудачу можно различием в оптимальном количестве кластеров для каждого метода, что приводило в случае ансамбля к низкомпу качеству классификации дольшинства из методов, включенных в ансамбль.</p>
<p>При итоговом моделировании получились следующие результаты:<ul>
<li>к бедным регионам было отнесено 20 субъектов,</li>
<li>к двум группам обычных &mdash; 20 и 28 субъектов,</li>
<li>к богатым &mdash; 13 регионов.</li>
</ul>
Анализ различий в показателях регионов позволил сделать выводы. разделённые условно на социальные и экономические.</p>
<p>Выводы на основе социальных показателей:<ul>
<li>в бедных регионах процент живущих за чертой бедности выше, чем в других (было бы странно увидеть что-то иное);</li>
<li>в бедных регионах ниже процент занятых в экономике региона;</li>
<li>в бедных регионах больше проблем с медициной &mdash; процент умерших младенцев выше, заболеваемость ниже, чем в остальных регионах</li>
<li>алкоголизм и наркомания не связаны с &laquo;богатством&raquo; региона;</li>
<li>бедность региона не имеет сильной зависимости от численности социально уязвимых групп населения.</li>
</ul></p>
<p>Экономические выводы можно сформулировать следующим образом:
<ul>
<li>характерной чертой бедных регионов является низкий уровень экономического развития; в этих регионах низкий объём валового продукта, меньший чем в других регионах объём отгруженных товаров собственного производства на душу населения и оборот розничной торговли;</li>
<li>в бедных регионах среди людей трудоспособного возраста самый маленький процент занятых в экономике и большой процент малоимущих, хотя и сопоставимый с таковым в обычных регионах;</li>
<li>в бедных регионах самый большой процент от регионального бюджета идёт на поддержку малоимущего населения.</li>
</ul>
Часть признаков правкически одинакова у всех регионов. Нет заметного влияния на бедность алкоголизма и наркоамании, здоровье является скорее следствием, чем причиной бедностир региона. Условие развития региона остаётся одно &mdash; экономика. Рост экономики потянет за собой снижение безработицы и увеличение дохода на душу населения, что в свою очередь переведёт регион в разряд средних или богатых. Вопрос только в том, а готово ли государство вкладываться в экономику данного региона (выгодно ли это экономически), и готово ли население участвовать в экономическом развитии своего региона.
</p>
<p>В конце работы приведена интерактивная карта Российской Федерации с выделением кластеров и некоторой информацией о регионе.</p>












   
